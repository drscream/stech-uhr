{% extends "base.html" %}
{% load stechuhr-tags %}

{% block navbar-right %}
<ul class="nav navbar-nav pull-right">
	<li><a href="/stechuhr/dashboard/" class="navbar-link">
		<i class="icon-dashboard"></i> Dashboard</a>
	</li>
	<li><a href="/stechuhr/reports/" class="navbar-link">
		<i class="icon-calendar"></i> Reports</a>
	</li>
	<li><a href="/stechuhr/settings/" class="navbar-link">
		<i class="icon-gears"></i> Settings</a>
	</li>
	<li><a href="/stechuhr/logout/" class="navbar-link">
		<i class="icon-off"></i> Log out</a>
	</li>
</ul>
{% endblock %}

{% block content %}
<div class="row">
	<div class="col-lg-12">
		<div class="page-header">
			<h1><i class="icon-calendar"></i> Reports
				<small>{{ user.first_name }} {{ user.last_name }}</small>
			</h1>
		</div>
	</div>
</div>
<div class="row last-row">
	<div class="col-lg-2">
		<div class="list-group">
			<a href="/stechuhr/dashboard/" class="list-group-item">
				<h5 class="list-group-item-heading">
					<i class="icon-fixed-width icon-dashboard"></i> Dashboard
				</h5>
			</a>
			<a href="/stechuhr/reports/" class="list-group-item active">
				<h5 class="list-group-item-heading">
					<i class="icon-fixed-width icon-calendar"></i> Reports
				</h5>
			</a>
			<a href="/stechuhr/settings/" class="list-group-item">
				<h5 class="list-group-item-heading">
					<i class="icon-fixed-width icon-gears"></i> Settings
				</h5>
			</a>
		</div>
		<div class="list-group">
			<a href="/stechuhr/reports/day/{% now "Y/n/j" %}/" class="list-group-item">
				<h5 class="list-group-item-heading">
					<i class="icon-fixed-width icon-calendar"></i> Day
					<small>{% now "Y/n/j" %}</small>
				</h5>
			</a>
			<a href="/stechuhr/reports/week/{% now "Y" %}/{% now "W" %}/" class="list-group-item">
				<h5 class="list-group-item-heading">
					<i class="icon-fixed-width icon-calendar"></i> Week
					<small>{% now "Y" %}/{% now "W" %}</small>
				</h5>
			</a>
			<a href="/stechuhr/reports/month/{% now "Y/n" %}" class="list-group-item">
				<h5 class="list-group-item-heading">
					<i class="icon-fixed-width icon-calendar"></i> Month
					<small>{% now "Y/n" %}</small>
				</h5>
			</a>
		</div>
	</div>
	<div class="col-lg-7">
		<div class="row">
			<div class="col-lg-12">
				<h3 class="table-header"><i class="icon-calendar"></i> Year
					<small>
						{% now "Y" %}
					{% if not year or year.count.opened > 0 %}
						<span class="text-info">
							<i class="icon-star-empty"></i>
						</span>
					{% else %}
						<span class="text-info">
							<i class="icon-star"></i>
						</span>
					{% endif %}
					</small>
				</h3>
			{% if year %}
				<table class="table table-stripped table-hover">
					<thead>
						<tr>
							<th>Days</th>
							<th>Working</th>
							<th>Leave</th>
							<th>Sick</th>
							<th>Earliest</th>
							<th>Latest</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>{{ year.count.total }}</td>
							<td>{{ year.count.working_days }}</td>
							<td>{{ year.count.leave_days }}</td>
							<td>{{ year.count.sick_days }}</td>
							<td>{{ year.early }}</td>
							<td>{{ year.late }}</td>
						</tr>
					</tbody>
				</table>
				<table class="table table-stripped table-hover">
					<thead>
						<tr>
							<th></th>
							<th>Total</th>
							<th>Average</th>
							<th>Longest</th>
							<th>Shortest</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>Working time</th>
							<td>{{ year.count.working_time.total|timeelapsed:"d" }}</td>
							<td>{{ year.count.working_time.avg_per_day|timeelapsed }}</td>
							<td>{{ year.count.working_time.max|timeelapsed }}</td>
							<td>{{ year.count.working_time.min|timeelapsed }}</td>
						</tr>
						<tr>
							<th>Pause</th>
							<td>{{ year.count.pause.total|timeelapsed:"d" }}</td>
							<td>{{ year.count.pause.avg_per_day|timeelapsed }}</td>
							<td>{{ year.count.pause.max|timeelapsed }}</td>
							<td>{{ year.count.pause.min|timeelapsed }}</td>
						</tr>
					</tbody>
				</table>
			{% else %}
				<div class="alert alert-info">
					No reports found.
				</div>
			{% endif %}
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<h3 class="table-header"><i class="icon-calendar"></i> Month
					<small>
						{% now "Y/n" %}
					{% if not month or month.count.opened > 0 %}
						<span class="text-info">
							<i class="icon-star-empty"></i>
						</span>
					{% else %}
						<span class="text-info">
							<i class="icon-star"></i>
						</span>
					{% endif %}
					</small>
				</h3>
			{% if month %}
				<table class="table table-stripped table-hover">
					<thead>
						<tr>
							<th>Days</th>
							<th>Working</th>
							<th>Leave</th>
							<th>Sick</th>
							<th>Earliest</th>
							<th>Latest</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>{{ month.count.total }}</td>
							<td>{{ month.count.working_days }}</td>
							<td>{{ month.count.leave_days }}</td>
							<td>{{ month.count.sick_days }}</td>
							<td>{% if month.early %}{{ month.early }}{% endif %}</td>
							<td>{% if month.late %}{{ month.late }}{% endif %}</td>
						</tr>
					</tbody>
				</table>
				<table class="table table-stripped table-hover">
					<thead>
						<tr>
							<th></th>
							<th>Total</th>
							<th>Average</th>
							<th>Longest</th>
							<th>Shortest</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>Working time</th>
							<td>{{ month.count.working_time.total|timeelapsed:"d" }}</td>
							<td>{{ month.count.working_time.avg_per_day|timeelapsed }}</td>
							<td>{{ month.count.working_time.max|timeelapsed }}</td>
							<td>{{ month.count.working_time.min|timeelapsed }}</td>
						</tr>
						<tr>
							<th>Pause</th>
							<td>{{ month.count.pause.total|timeelapsed:"d" }}</td>
							<td>{{ month.count.pause.avg_per_day|timeelapsed }}</td>
							<td>{{ month.count.pause.max|timeelapsed }}</td>
							<td>{{ month.count.pause.min|timeelapsed }}</td>
						</tr>
					</tbody>
				</table>
			{% else %}
				<div class="alert alert-info">
					No reports found.
				</div>
			{% endif %}
			</div>
		</div>

	</div>
	<div class="col-lg-3">
	</div>
</div>
{% endblock %}

<!-- vim: set ft=htmldjango ts=4 sw=4 : -->
